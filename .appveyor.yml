version: 1.0.{build}
image: Visual Studio 2015
init:
  - git config --global core.autocrlf input
clone_folder: c:\projects\TestCI
shallow_clone: true           
matrix:
   fast_finish: false
platform:
    - x64
    - x86
configuration:
    - Debug
    - Release
environment:
    matrix:
       - TOOLCHAIN: msvc12
# priv_key:
#    secure:UZfeM9bMxutpv6w+pnQoQmWeb7iuN3i2owdX82mBq8SbO6k4mlI1FvQga9yp4BDO
before_build:
# - mkdir test
# - cd test
# - git clone $env:priv_key
# - cd C:\projects\TestCI
# - mkdir clones
# - git clone https://github.com/unloguc/TestCI.git
build_script:
  - cd C:\projects\TestCI
  - mkdir build
  - cd build
  - cmake .. %CMAKE_CONFIGURE_FLAGS%
  - cmake --build . %CMAKE_BUILD_FLAGS%
#  - cd bin
# - '**\*.test_TestCI.exe'
test_script:
 - cmd: C:\projects\TestCI\build\bin\test_TestCI.exe